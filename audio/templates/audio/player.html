{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>FLAC Player</title>
</head>
<body>

    <button onclick="startPlayback()">ðŸŽµ Start Music</button>

<audio id="flacPlayer" hidden></audio>

<audio controls>
  <source src="/media/hob.mp3" type="audio/mpeg">
</audio>

{{ flac_files|json_script:"flac-data" }}

<script>
    const playlist = JSON.parse(document.getElementById("flac-data").textContent);
    let index = 0;
    const player = document.getElementById("flacPlayer");

    function playNext() {
        if (index < playlist.length) {
            player.src = playlist[index];
            player.load();
            player.play().catch(err => {
                console.warn("Playback error:", err);
            });
            index++;
        }
    }

    function startPlayback() {
        playNext();
        player.addEventListener('ended', playNext);
    }
</script>





</body>
</html>
